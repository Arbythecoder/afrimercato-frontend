import{j as e}from"./date-C9mDCBzx.js";import{b as E,f as A,r as t}from"./vendor-BfFvvk5l.js";import{v as V}from"./index-CqZc79AA.js";import"./ui-qKdnnCNY.js";const M=[{id:"all",name:"All Stores",icon:"ðŸª"},{id:"fresh-produce",name:"Fresh Produce",icon:"ðŸ¥¬"},{id:"meat-fish",name:"Meat & Fish",icon:"ðŸ¥©"},{id:"dairy",name:"Dairy",icon:"ðŸ¥›"},{id:"bakery",name:"Bakery",icon:"ðŸž"},{id:"spices",name:"Spices",icon:"ðŸŒ¶ï¸"},{id:"beverages",name:"Beverages",icon:"ðŸ§ƒ"},{id:"pantry",name:"Pantry",icon:"ðŸ¥«"}],U=[{id:"distance",name:"Nearest First"},{id:"rating",name:"Highest Rated"},{id:"popular",name:"Most Popular"},{id:"newest",name:"Newest"}];function I(){const p=E(),[d,S]=A(),[n,F]=t.useState([]),[x,u]=t.useState(!0),[c,f]=t.useState(d.get("q")||""),[r,j]=t.useState(d.get("category")||"all"),[i,C]=t.useState(d.get("sort")||"distance"),[o,m]=t.useState(d.get("location")||""),[_,G]=t.useState(!1),[l,y]=t.useState("grid"),[g,$]=t.useState(null),[N,h]=t.useState(!1);t.useEffect(()=>{b()},[r,i,o]),t.useEffect(()=>{const s=new URLSearchParams;c&&s.set("q",c),r!=="all"&&s.set("category",r),i!=="distance"&&s.set("sort",i),o&&s.set("location",o),S(s)},[c,r,i,o]);const b=async()=>{try{u(!0);const s={category:r!=="all"?r:void 0,sort:i,search:c,location:g?`${g.lat},${g.lng}`:o},a=await V.getVendors(s);a.success&&F(a.data||[])}catch(s){console.error("Error fetching vendors:",s)}finally{u(!1)}},k=()=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser");return}h(!0),navigator.geolocation.getCurrentPosition(s=>{$({lat:s.coords.latitude,lng:s.coords.longitude}),m("Current Location"),h(!1)},s=>{console.error("Location error:",s),alert("Unable to get your location. Please enter it manually."),h(!1)})},L=s=>{s.preventDefault(),b()};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-afri-green to-afri-green-dark text-white py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-center mb-2",children:"Discover African Grocery Stores"}),e.jsx("p",{className:"text-afri-green-light text-center mb-8",children:"Fresh produce, authentic spices, and more near you"}),e.jsx("form",{onSubmit:L,className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"ðŸ”"}),e.jsx("input",{type:"text",value:c,onChange:s=>f(s.target.value),placeholder:"Search stores or products...",className:"w-full pl-12 pr-4 py-4 rounded-xl text-gray-900 focus:ring-2 focus:ring-afri-gold"})]}),e.jsxs("div",{className:"relative flex-1 md:max-w-xs",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"ðŸ“"}),e.jsx("input",{type:"text",value:o,onChange:s=>m(s.target.value),placeholder:"Enter postcode or area",className:"w-full pl-12 pr-12 py-4 rounded-xl text-gray-900 focus:ring-2 focus:ring-afri-gold"}),e.jsx("button",{type:"button",onClick:k,disabled:N,className:"absolute right-3 top-1/2 -translate-y-1/2 text-afri-green hover:text-afri-green-dark",title:"Use current location",children:N?"â³":"ðŸŽ¯"})]}),e.jsx("button",{type:"submit",className:"bg-afri-gold text-gray-900 px-8 py-4 rounded-xl font-semibold hover:bg-yellow-400 transition-colors",children:"Search"})]})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 mb-6 scrollbar-hide",children:M.map(s=>e.jsxs("button",{onClick:()=>j(s.id),className:`flex items-center gap-2 px-5 py-3 rounded-full whitespace-nowrap transition-all ${r===s.id?"bg-afri-green text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 shadow"}`,children:[e.jsx("span",{className:"text-xl",children:s.icon}),e.jsx("span",{className:"font-medium",children:s.name})]},s.id))}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsx("p",{className:"text-gray-600",children:x?"Finding stores...":`${n.length} stores found`}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("select",{value:i,onChange:s=>C(s.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-afri-green",children:U.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsxs("div",{className:"flex bg-white rounded-lg border overflow-hidden",children:[e.jsx("button",{onClick:()=>y("grid"),className:`p-2 ${l==="grid"?"bg-afri-green text-white":""}`,children:"â–¦"}),e.jsx("button",{onClick:()=>y("list"),className:`p-2 ${l==="list"?"bg-afri-green text-white":""}`,children:"â˜°"})]})]})]}),x?e.jsx("div",{className:`grid ${l==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-6`,children:[1,2,3,4,5,6].map(s=>e.jsxs("div",{className:"bg-white rounded-xl p-4 animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 h-48 rounded-lg mb-4"}),e.jsx("div",{className:"bg-gray-200 h-5 rounded w-2/3 mb-2"}),e.jsx("div",{className:"bg-gray-200 h-4 rounded w-1/2"})]},s))}):n.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-8xl",children:"ðŸª"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-6",children:"No stores found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search or location"}),e.jsx("button",{onClick:()=>{f(""),j("all"),m("")},className:"mt-6 px-6 py-3 bg-afri-green text-white rounded-xl font-semibold",children:"Clear Filters"})]}):e.jsx("div",{className:`grid ${l==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-6`,children:n.map(s=>{var a,w,v;return e.jsxs("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all cursor-pointer group ${l==="list"?"flex":""}`,onClick:()=>p(`/store/${s._id}`),children:[e.jsxs("div",{className:`relative ${l==="list"?"w-48 flex-shrink-0":""}`,children:[e.jsx("img",{src:s.coverImage||s.logo||"https://images.unsplash.com/photo-1542838132-92c53300491e?w=400",alt:s.storeName,className:`w-full object-cover group-hover:scale-105 transition-transform ${l==="list"?"h-full":"h-48"}`}),s.isOpen!==!1&&e.jsx("span",{className:"absolute top-3 left-3 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Open Now"}),s.featured&&e.jsx("span",{className:"absolute top-3 right-3 bg-afri-gold text-gray-900 text-xs px-2 py-1 rounded-full",children:"Featured"})]}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.storeName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.category||"African Groceries"})]}),s.logo&&e.jsx("img",{src:s.logo,alt:"",className:"w-12 h-12 rounded-full object-cover border-2 border-white shadow"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-400",children:"â˜…"}),e.jsx("span",{className:"font-semibold",children:((a=s.rating)==null?void 0:a.toFixed(1))||"4.5"}),e.jsxs("span",{className:"text-gray-400",children:["(",s.reviewCount||0,")"]})]}),s.distance&&e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx("span",{children:"ðŸ“"}),e.jsxs("span",{children:[s.distance.toFixed(1)," miles"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(w=s.tags)==null?void 0:w.slice(0,3).map((P,D)=>e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:P},D))}),e.jsxs("div",{className:"flex items-center justify-between text-sm pt-3 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("span",{children:"ðŸšš"}),e.jsx("span",{children:s.deliveryTime||"30-45 min"})]}),e.jsx("div",{className:"text-gray-600",children:s.deliveryFee===0?e.jsx("span",{className:"text-green-600 font-semibold",children:"Free Delivery"}):e.jsxs("span",{children:["Delivery: Â£",((v=s.deliveryFee)==null?void 0:v.toFixed(2))||"2.99"]})})]})]})]},s._id)})}),!x&&n.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Popular in Your Area"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.slice(0,4).map(s=>{var a;return e.jsxs("div",{className:"bg-white rounded-xl p-4 text-center cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>p(`/store/${s._id}`),children:[e.jsx("img",{src:s.logo||"https://images.unsplash.com/photo-1542838132-92c53300491e?w=100",alt:s.storeName,className:"w-20 h-20 rounded-full mx-auto object-cover mb-3"}),e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.storeName}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm",children:[e.jsx("span",{className:"text-yellow-400",children:"â˜…"}),e.jsx("span",{children:((a=s.rating)==null?void 0:a.toFixed(1))||"4.5"})]})]},s._id+"-featured")})})]})]})]})}export{I as default};
