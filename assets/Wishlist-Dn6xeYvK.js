import{j as e}from"./date-iP6_brdS.js";import{u,r as l}from"./vendor-CPDP2aPO.js";import{f as c}from"./index-B_A1dkTv.js";import{g as p}from"./defaultImages-jUbsX-qu.js";import"./ui-Tzc8TJql.js";function w(){const a=u(),[i,o]=l.useState([]),[d,n]=l.useState(!0);l.useEffect(()=>{m()},[]);const m=async()=>{try{n(!0);const t=await c.getWishlist();t.success&&o(t.data||[])}catch(t){console.error("Error fetching wishlist:",t)}finally{n(!1)}},x=async t=>{try{await c.removeFromWishlist(t),o(s=>s.filter(r=>(r._id||r.productId)!==t))}catch(s){console.error("Error removing from wishlist:",s)}},h=t=>{const s=JSON.parse(localStorage.getItem("afrimercato_cart")||"[]"),r=s.findIndex(g=>g._id===t._id);r>=0?s[r].quantity+=1:s.push({...t,quantity:1}),localStorage.setItem("afrimercato_cart",JSON.stringify(s)),window.dispatchEvent(new Event("cartUpdated")),alert(`${t.name} added to cart!`)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-afri-green to-afri-green-dark text-white py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wishlist"}),e.jsxs("p",{className:"text-afri-green-light mt-1",children:[i.length," saved items"]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:d?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-white rounded-xl p-4 animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 h-40 rounded-lg mb-4"}),e.jsx("div",{className:"bg-gray-200 h-4 rounded mb-2"}),e.jsx("div",{className:"bg-gray-200 h-4 w-2/3 rounded"})]},t))}):i.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-8xl",children:"❤️"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-6",children:"Your wishlist is empty"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Save items you love for later!"}),e.jsx("button",{onClick:()=>a("/products"),className:"mt-6 px-8 py-3 bg-afri-green text-white rounded-xl font-semibold",children:"Browse Products"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:i.map(t=>{var r;const s=t.product||t;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p(s),alt:s.name,className:"w-full h-48 object-cover cursor-pointer group-hover:scale-105 transition-transform",onClick:()=>a(`/product/${s._id}`)}),e.jsx("button",{onClick:()=>x(s._id),className:"absolute top-2 right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg hover:bg-red-50",children:"❌"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 line-clamp-2 cursor-pointer hover:text-afri-green",onClick:()=>a(`/product/${s._id}`),children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:s.unit||"per item"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-afri-green",children:["£",(r=s.price)==null?void 0:r.toFixed(2)]}),e.jsx("button",{onClick:()=>h(s),className:"bg-afri-green text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-afri-green-dark",children:"Add to Cart"})]})]})]},t._id||s._id)})})})]})}export{w as default};
