import{j as e}from"./date-iP6_brdS.js";import{u as w,r as i}from"./vendor-CPDP2aPO.js";import{o as C}from"./index-B_A1dkTv.js";import"./ui-Tzc8TJql.js";const k={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800","out-for-delivery":"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"};function D(){const o=w(),[u,p]=i.useState([]),[f,x]=i.useState(!0),[n,b]=i.useState("all"),[c,j]=i.useState("");i.useEffect(()=>{y()},[n]);const y=async()=>{try{x(!0);const s=n!=="all"?{status:n}:{},t=await C.getUserOrders(s);t.success&&p(t.data.orders||t.data||[])}catch(s){console.error("Error fetching orders:",s)}finally{x(!1)}},m=u.filter(s=>{var t,r;return((t=s.orderNumber)==null?void 0:t.toLowerCase().includes(c.toLowerCase()))||((r=s.items)==null?void 0:r.some(d=>{var a;return(a=d.name)==null?void 0:a.toLowerCase().includes(c.toLowerCase())}))}),N=[{id:"all",label:"All Orders"},{id:"pending",label:"Pending"},{id:"confirmed",label:"Confirmed"},{id:"out-for-delivery",label:"In Transit"},{id:"delivered",label:"Delivered"},{id:"cancelled",label:"Cancelled"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-afri-green to-afri-green-dark text-white py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Order History"}),e.jsx("p",{className:"text-afri-green-light mt-1",children:"Track and manage your orders"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search orders...",value:c,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-afri-green focus:border-transparent"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:N.map(s=>e.jsx("button",{onClick:()=>b(s.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${n===s.id?"bg-afri-green text-white":"bg-gray-100 hover:bg-gray-200"}`,children:s.label},s.id))})]})}),f?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-xl p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},s))}):m.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-6xl",children:"ðŸ“¦"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Start shopping to see your orders here!"}),e.jsx("button",{onClick:()=>o("/products"),className:"mt-6 px-6 py-3 bg-afri-green text-white rounded-xl font-semibold",children:"Browse Products"})]}):e.jsx("div",{className:"space-y-4",children:m.map(s=>{var t,r,d,a,g,h;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>o(`/order/${s._id}`),children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Order #",s.orderNumber]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${k[s.status]}`,children:(t=s.status)==null?void 0:t.replace(/-/g," ").replace(/\b\w/g,l=>l.toUpperCase())})]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[((r=s.items)==null?void 0:r.length)||0," items â€¢ ",((d=s.vendor)==null?void 0:d.storeName)||"AfriMercato"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-afri-green",children:["Â£",(a=s.totalAmount)==null?void 0:a.toFixed(2)]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),o(`/order/${s._id}`)},className:"mt-2 text-sm text-afri-green hover:underline font-semibold",children:"View Details â†’"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-2 overflow-x-auto",children:[(g=s.items)==null?void 0:g.slice(0,4).map((l,v)=>e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl",children:"ðŸ›’"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate w-16",children:l.name||"Item"})]},v)),((h=s.items)==null?void 0:h.length)>4&&e.jsxs("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-sm text-gray-500",children:["+",s.items.length-4]})]})]},s._id)})})]})]})}export{D as default};
