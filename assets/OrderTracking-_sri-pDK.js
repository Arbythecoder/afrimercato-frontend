import{j as e}from"./date-iP6_brdS.js";import{i as O,r as l,L as N}from"./vendor-CPDP2aPO.js";const k="https://afrimercato-backend.fly.dev";function D(){var i,c,n,x,m,o,h,g,j,f;const{orderId:d}=O(),[t,u]=l.useState(null),[v,S]=l.useState(null),[p,w]=l.useState(!0);l.useEffect(()=>{const r=async()=>{try{const b=await(await fetch(`${k}/api/orders/${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("afrimercato_token")}`}})).json();b.success&&u(b.data)}catch(y){console.error("Error fetching order:",y)}finally{w(!1)}};r();const a=setInterval(r,1e4);return()=>clearInterval(a)},[d]);const A=r=>({pending:1,confirmed:2,picking:3,ready_for_pickup:4,"out-for-delivery":5,delivered:6})[r]||1;if(p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-green-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Loading tracking info..."})]})});if(!t)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl mb-4",children:"ðŸ˜”"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Order not found"}),e.jsx(N,{to:"/stores",className:"text-green-600 hover:underline",children:"Continue Shopping"})]})});const s=A(t.status);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"container mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ›’"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Afrimercato"})]}),e.jsx(N,{to:"/my-dashboard",className:"text-gray-600 hover:text-gray-900",children:"My Orders"})]})})}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Track Your Order"}),e.jsxs("p",{className:"text-gray-600",children:["Order #",t.orderNumber]})]}),e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-semibold ${t.status==="delivered"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:(i=t.status)==null?void 0:i.replace("-"," ").toUpperCase()})]}),t.status!=="delivered"&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:"ðŸšš"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Estimated Delivery Time"}),e.jsx("p",{className:"text-sm text-gray-600",children:"20-40 minutes from now"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Progress"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s>=1?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>1?"âœ“":"1"}),s>1&&e.jsx("div",{className:"w-1 h-16 bg-green-600 mt-2"}),s===1&&e.jsx("div",{className:"w-1 h-16 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Order Placed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your order has been received"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(t.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s>=2?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>2?"âœ“":"2"}),s>2&&e.jsx("div",{className:"w-1 h-16 bg-green-600 mt-2"}),s<=2&&e.jsx("div",{className:"w-1 h-16 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Order Confirmed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Store is preparing your order"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s>=3?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>3?"âœ“":"3"}),s>3&&e.jsx("div",{className:"w-1 h-16 bg-green-600 mt-2"}),s<=3&&e.jsx("div",{className:"w-1 h-16 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Picking Items"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Items are being picked from shelves"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s>=4?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>4?"âœ“":"4"}),s>4&&e.jsx("div",{className:"w-1 h-16 bg-green-600 mt-2"}),s<=4&&e.jsx("div",{className:"w-1 h-16 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Ready for Pickup"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Packed and waiting for rider"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s>=5?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>5?"âœ“":"5"}),s>5&&e.jsx("div",{className:"w-1 h-16 bg-green-600 mt-2"}),s<=5&&e.jsx("div",{className:"w-1 h-16 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Out for Delivery"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Rider is on the way"}),v&&e.jsx("div",{className:"mt-2 bg-blue-50 rounded p-2",children:e.jsx("p",{className:"text-xs text-blue-700",children:"ðŸ“ Rider location updating in real-time"})})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s>=6?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>=6?"âœ“":"6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Delivered"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Order delivered successfully"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:(c=t.items)==null?void 0:c.map((r,a)=>e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",r.quantity]})]}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["Â£",(r.price*r.quantity).toFixed(2)]})]},a))}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 border-t mt-4 pt-4",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["Â£",(x=(n=t.pricing)==null?void 0:n.total)==null?void 0:x.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Delivery Address"}),e.jsxs("p",{className:"text-gray-700",children:[(m=t.deliveryAddress)==null?void 0:m.fullName,e.jsx("br",{}),(o=t.deliveryAddress)==null?void 0:o.phone,e.jsx("br",{}),(h=t.deliveryAddress)==null?void 0:h.street,e.jsx("br",{}),(g=t.deliveryAddress)==null?void 0:g.city,", ",(j=t.deliveryAddress)==null?void 0:j.postalCode]}),((f=t.deliveryAddress)==null?void 0:f.instructions)&&e.jsx("div",{className:"mt-3 bg-yellow-50 rounded p-3",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Instructions:"})," ",t.deliveryAddress.instructions]})})]}),t.status==="delivered"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Rate Your Experience"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"How was your delivery experience?"}),e.jsx("button",{className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition",children:"Leave a Review"})]})]})})]})}export{D as default};
