import{j as e}from"./date-C9mDCBzx.js";import{i as j,b as v,r as d}from"./vendor-BfFvvk5l.js";function k(){const{deliveryId:c}=j(),l=v(),[s,o]=d.useState(null),[x,m]=d.useState(!0);d.useEffect(()=>{p()},[c]);const p=async()=>{try{setTimeout(()=>{o({id:c,orderNumber:"AFM-2024-001",status:"picking-up",customer:{name:"Sarah Johnson",phone:"+44 7700 900001",address:"42 High Street, London SW1A 1AA",instructions:"Ring doorbell twice. Leave at door if no answer."},vendor:{name:"Fresh Valley Farms",phone:"+44 7700 800001",address:"123 Market Lane, London EC1A 1BB"},items:[{name:"Organic Tomatoes",quantity:2,unit:"kg"},{name:"Fresh Spinach",quantity:1,unit:"bunch"},{name:"Free Range Eggs",quantity:1,unit:"dozen"},{name:"Whole Milk",quantity:2,unit:"litres"},{name:"Sourdough Bread",quantity:1,unit:"loaf"}],earnings:4.5,distance:2.3,estimatedTime:"15 min",createdAt:new Date().toISOString(),timeline:[{status:"assigned",time:"10:30 AM",description:"Order assigned to you"},{status:"picking-up",time:"10:35 AM",description:"On your way to pickup"}]}),m(!1)},500)}catch(t){console.error("Error fetching delivery:",t),m(!1)}},h=async t=>{try{o(r=>({...r,status:t})),t==="delivered"&&(alert("Delivery completed! Great job!"),l("/rider/dashboard"))}catch(r){console.error("Error updating status:",r)}},g=()=>{var t;window.open(`tel:${(t=s==null?void 0:s.customer)==null?void 0:t.phone}`)},b=()=>{var t;window.open(`tel:${(t=s==null?void 0:s.vendor)==null?void 0:t.phone}`)},u=t=>{const r=encodeURIComponent(t);window.open(`https://www.google.com/maps/dir/?api=1&destination=${r}`,"_blank")},a=[{key:"assigned",label:"Assigned",icon:"üìã"},{key:"picking-up",label:"Picking Up",icon:"üè™"},{key:"picked-up",label:"Picked Up",icon:"üì¶"},{key:"in-transit",label:"In Transit",icon:"üöö"},{key:"delivered",label:"Delivered",icon:"‚úì"}],y=()=>{const t=a.findIndex(r=>r.key===(s==null?void 0:s.status));return t>=0?t:0},f=()=>{switch(s==null?void 0:s.status){case"assigned":case"picking-up":return{label:"Confirm Pickup",status:"picked-up",color:"bg-blue-600 hover:bg-blue-700"};case"picked-up":return{label:"Start Delivery",status:"in-transit",color:"bg-purple-600 hover:bg-purple-700"};case"in-transit":return{label:"Mark as Delivered",status:"delivered",color:"bg-green-600 hover:bg-green-700"};default:return null}};if(x)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!s)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-6xl",children:"üîç"}),e.jsx("h2",{className:"text-xl font-bold mt-4",children:"Delivery not found"}),e.jsx("button",{onClick:()=>l("/rider/deliveries"),className:"mt-4 px-6 py-3 bg-purple-600 text-white rounded-xl",children:"Back to Deliveries"})]})});const i=y(),n=f();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white py-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsx("button",{onClick:()=>l("/rider/deliveries"),className:"text-purple-200 hover:text-white mb-2",children:"‚Üê Back to Deliveries"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.orderNumber}),e.jsxs("p",{className:"text-purple-200",children:[s.items.length," items ‚Ä¢ ",s.distance," km"]})]}),e.jsxs("span",{className:"text-2xl font-bold",children:["¬£",s.earnings.toFixed(2)]})]})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"Delivery Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-6 left-0 right-0 h-1 bg-gray-200",children:e.jsx("div",{className:"h-full bg-purple-600 transition-all",style:{width:`${i/(a.length-1)*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:a.map((t,r)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xl z-10 ${r<=i?"bg-purple-600 text-white":"bg-gray-200 text-gray-400"}`,children:t.icon}),e.jsx("p",{className:`mt-2 text-xs font-medium text-center ${r<=i?"text-purple-600":"text-gray-400"}`,children:t.label})]},t.key))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-bold text-gray-900",children:"üìç Pickup"}),["assigned","picking-up"].includes(s.status)&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold",children:"Current Stop"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.vendor.name}),e.jsx("p",{className:"text-gray-500",children:s.vendor.address})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(s.vendor.address),className:"flex-1 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700",children:"üó∫Ô∏è Navigate"}),e.jsx("button",{onClick:b,className:"px-4 py-3 bg-gray-100 rounded-lg hover:bg-gray-200",children:"üìû"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-bold text-gray-900",children:"üè† Delivery"}),["picked-up","in-transit"].includes(s.status)&&e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-semibold",children:"Current Stop"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.customer.name}),e.jsx("p",{className:"text-gray-500",children:s.customer.address})]}),s.customer.instructions&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"üìù Instructions:"}),e.jsx("p",{className:"text-sm text-yellow-700",children:s.customer.instructions})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(s.customer.address),className:"flex-1 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700",children:"üó∫Ô∏è Navigate"}),e.jsx("button",{onClick:g,className:"px-4 py-3 bg-gray-100 rounded-lg hover:bg-gray-200",children:"üìû"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("h2",{className:"font-bold text-gray-900 mb-4",children:["üì¶ Order Items (",s.items.length,")"]}),e.jsx("div",{className:"space-y-3",children:s.items.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center text-sm font-semibold",children:t.quantity}),e.jsx("span",{className:"text-gray-900",children:t.name})]}),e.jsx("span",{className:"text-sm text-gray-500",children:t.unit})]},r))})]}),n&&e.jsx("button",{onClick:()=>h(n.status),className:`w-full py-4 rounded-xl text-white font-bold text-lg ${n.color}`,children:n.label}),e.jsx("button",{className:"w-full mt-4 py-3 border-2 border-red-500 text-red-500 rounded-xl font-semibold hover:bg-red-50",children:"‚ö†Ô∏è Report an Issue"})]})]})}export{k as default};
