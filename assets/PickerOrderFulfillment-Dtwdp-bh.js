import{j as e}from"./date-iP6_brdS.js";import{i as v,u as w,r as c}from"./vendor-CPDP2aPO.js";function S(){const{orderId:u}=v(),d=w(),[t,m]=c.useState(null),[f,g]=c.useState(!0),[b,x]=c.useState(!1),[r,p]=c.useState(null);c.useEffect(()=>{j()},[u]);const j=async()=>{try{setTimeout(()=>{m({id:u,orderNumber:"AFM-2024-001",customer:"Sarah Johnson",vendor:"Fresh Valley Farms",priority:"high",createdAt:new Date().toISOString(),estimatedPickup:"10:45 AM",items:[{id:1,name:"Organic Tomatoes",quantity:2,unit:"kg",price:3.5,location:"A-3-2",picked:!1,image:"https://images.unsplash.com/photo-1546094096-0df4bcaaa337?w=100"},{id:2,name:"Fresh Spinach",quantity:1,unit:"bunch",price:1.99,location:"A-5-1",picked:!1,image:"https://images.unsplash.com/photo-1576045057995-568f588f82fb?w=100"},{id:3,name:"Free Range Eggs",quantity:1,unit:"dozen",price:4.5,location:"B-2-4",picked:!1,image:"https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=100"},{id:4,name:"Whole Milk",quantity:2,unit:"litres",price:2.2,location:"C-1-1",picked:!1,image:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100"},{id:5,name:"Sourdough Bread",quantity:1,unit:"loaf",price:3,location:"D-2-3",picked:!1,image:"https://images.unsplash.com/photo-1509440159596-0249088772ff?w=100"}],specialInstructions:"Please select the ripest tomatoes. Customer prefers whole milk, not skimmed."}),g(!1)},500)}catch(s){console.error("Error fetching order:",s),g(!1)}},y=s=>{m(a=>({...a,items:a.items.map(l=>l.id===s?{...l,picked:!l.picked}:l)}))},o=(s,a)=>{m(l=>({...l,items:l.items.map(h=>h.id===s.id?{...h,issue:a,picked:!0}:h)})),x(!1),p(null)},N=()=>{if(!t.items.every(a=>a.picked)){alert("Please pick or report issues for all items before completing");return}alert("Order completed and ready for delivery!"),d("/picker/dashboard")};if(f)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})});if(!t)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-6xl",children:"üîç"}),e.jsx("h2",{className:"text-xl font-bold mt-4",children:"Order not found"}),e.jsx("button",{onClick:()=>d("/picker/dashboard"),className:"mt-4 px-6 py-3 bg-orange-500 text-white rounded-xl",children:"Back to Dashboard"})]})});const i=t.items.filter(s=>s.picked).length,n=t.items.length,k=i/n*100;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:()=>d("/picker/dashboard"),className:"text-orange-100 hover:text-white",children:"‚Üê Back"}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t.priority==="high"?"bg-red-500":"bg-orange-400"}`,children:[t.priority.toUpperCase()," PRIORITY"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:t.orderNumber}),e.jsx("p",{className:"text-orange-100 text-sm",children:t.vendor})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[i,"/",n]}),e.jsx("p",{className:"text-orange-100 text-sm",children:"items picked"})]})]}),e.jsx("div",{className:"mt-3 h-2 bg-orange-400 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${k}%`}})})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[t.specialInstructions&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:"üìù"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Special Instructions"}),e.jsx("p",{className:"text-sm text-yellow-700",children:t.specialInstructions})]})]})}),e.jsx("div",{className:"space-y-3",children:t.items.map((s,a)=>e.jsx("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden transition-all ${s.picked?"opacity-75":""}`,children:e.jsxs("div",{className:"flex items-stretch",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${s.picked?"line-through text-gray-400":"text-gray-900"}`,children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.quantity," ",s.unit]})]}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-mono",children:["üìç ",s.location]})]}),s.issue&&e.jsxs("div",{className:"mt-2 px-2 py-1 bg-red-100 text-red-700 rounded text-xs",children:["‚ö†Ô∏è ",s.issue]})]}),e.jsxs("div",{className:"flex flex-col justify-center gap-2 p-2 border-l",children:[e.jsx("button",{onClick:()=>y(s.id),className:`w-12 h-12 rounded-lg flex items-center justify-center text-xl transition-all ${s.picked?"bg-green-500 text-white":"bg-gray-100 text-gray-400 hover:bg-green-100 hover:text-green-500"}`,children:s.picked?"‚úì":"‚óã"}),!s.picked&&e.jsx("button",{onClick:()=>{p(s),x(!0)},className:"w-12 h-12 rounded-lg bg-gray-100 text-gray-500 hover:bg-red-100 hover:text-red-500 flex items-center justify-center",children:"‚ö†Ô∏è"})]})]})},s.id))}),e.jsx("div",{className:"mt-8 sticky bottom-4",children:e.jsx("button",{onClick:N,disabled:i<n,className:`w-full py-4 rounded-xl font-bold text-lg transition-all ${i===n?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i===n?"‚úì Complete Order":`Pick ${n-i} more items`})})]}),b&&r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-sm w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Report Issue"}),e.jsx("p",{className:"text-gray-500 mb-4",children:r.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>o(r,"Out of Stock"),className:"w-full p-4 text-left bg-gray-50 rounded-lg hover:bg-gray-100",children:[e.jsx("p",{className:"font-semibold",children:"Out of Stock"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Item is not available"})]}),e.jsxs("button",{onClick:()=>o(r,"Quality Issue"),className:"w-full p-4 text-left bg-gray-50 rounded-lg hover:bg-gray-100",children:[e.jsx("p",{className:"font-semibold",children:"Quality Issue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Item doesn't meet quality standards"})]}),e.jsxs("button",{onClick:()=>o(r,"Wrong Item"),className:"w-full p-4 text-left bg-gray-50 rounded-lg hover:bg-gray-100",children:[e.jsx("p",{className:"font-semibold",children:"Wrong Item"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Can't find the correct item"})]}),e.jsxs("button",{onClick:()=>o(r,"Partial Quantity"),className:"w-full p-4 text-left bg-gray-50 rounded-lg hover:bg-gray-100",children:[e.jsx("p",{className:"font-semibold",children:"Partial Quantity"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Less stock than ordered"})]})]}),e.jsx("button",{onClick:()=>x(!1),className:"w-full mt-4 py-3 text-gray-500 hover:text-gray-700",children:"Cancel"})]})})]})}export{S as default};
