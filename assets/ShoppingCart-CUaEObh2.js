import{j as e}from"./date-iP6_brdS.js";import{u as y,r as d}from"./vendor-CPDP2aPO.js";import{g as v}from"./defaultImages-jUbsX-qu.js";function k(){const l=y(),[s,i]=d.useState([]),[p,f]=d.useState(!0),[a,u]=d.useState(null);d.useEffect(()=>(x(),window.addEventListener("cartUpdated",x),()=>window.removeEventListener("cartUpdated",x)),[]);const x=()=>{const t=JSON.parse(localStorage.getItem("afrimercato_cart")||"[]");i(t),f(!1)},m=(t,r)=>{if(r<1){g(t);return}const c=s.map(h=>h._id===t?{...h,quantity:r}:h);i(c),localStorage.setItem("afrimercato_cart",JSON.stringify(c)),window.dispatchEvent(new Event("cartUpdated"))},g=t=>{const r=s.filter(c=>c._id!==t);i(r),localStorage.setItem("afrimercato_cart",JSON.stringify(r)),window.dispatchEvent(new Event("cartUpdated"))},j=()=>{i([]),localStorage.removeItem("afrimercato_cart"),window.dispatchEvent(new Event("cartUpdated"))},n=s.reduce((t,r)=>t+r.price*r.quantity,0),o=n>30?0:3.99,b=n+o;return p?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-afri-green"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-afri-green to-afri-green-dark text-white py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Shopping Cart"}),e.jsxs("p",{className:"text-afri-green-light mt-1",children:[s.length," items in your cart"]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-8xl",children:"ğŸ›’"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-6",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Add some delicious products to get started!"}),e.jsx("button",{onClick:()=>l("/products"),className:"mt-6 px-8 py-3 bg-gradient-to-r from-afri-green to-afri-green-dark text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Browse Products"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Cart Items"}),e.jsx("button",{onClick:j,className:"text-red-500 hover:text-red-600 text-sm font-semibold",children:"Clear All"})]}),s.map(t=>{var r;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 flex gap-4 hover:shadow-xl transition-shadow",children:[e.jsx("img",{src:v(t),alt:t.name,className:"w-24 h-24 rounded-lg object-cover cursor-pointer",onClick:()=>l(`/product/${t._id}`)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 hover:text-afri-green cursor-pointer",onClick:()=>l(`/product/${t._id}`),children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.unit||"per item"}),e.jsx("p",{className:"text-sm text-afri-green",children:((r=t.vendor)==null?void 0:r.storeName)||"AfriMercato"})]}),e.jsx("button",{onClick:()=>g(t._id),className:"text-gray-400 hover:text-red-500 transition-colors h-fit",children:"âœ•"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>m(t._id,t.quantity-1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center font-bold",children:"âˆ’"}),e.jsx("span",{className:"font-semibold w-8 text-center",children:t.quantity}),e.jsx("button",{onClick:()=>m(t._id,t.quantity+1),className:"w-8 h-8 rounded-full bg-afri-green text-white hover:bg-afri-green-dark flex items-center justify-center font-bold",children:"+"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-afri-green",children:["Â£",(t.price*t.quantity).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Â£",t.price.toFixed(2)," each"]})]})]})]})]},t._id)}),e.jsxs("div",{className:"bg-gradient-to-br from-afri-green-light/10 to-afri-green/10 rounded-xl p-6 border border-afri-green-light",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"ğŸ”„ Set item(s) for repurchase"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Never run out of your favorites! Select how often you'd like this order to repeat automatically."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:["Weekly","Bi-weekly","Monthly","Quarterly"].map(t=>e.jsx("button",{onClick:()=>u(a===t.toLowerCase().replace("-","-")?null:t.toLowerCase().replace("-","-")),className:`py-3 px-4 rounded-lg font-semibold transition-all transform hover:scale-105 ${a===t.toLowerCase().replace("-","-")?"bg-afri-green text-white shadow-lg":"bg-white text-gray-700 border-2 border-afri-green-light hover:border-afri-green hover:bg-afri-green-light/5"}`,children:e.jsx("span",{className:"block text-sm",children:t})},t))}),a&&e.jsx("div",{className:"mt-4 p-3 bg-afri-green-light/10 rounded-lg border-l-4 border-afri-green",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["âœ“ This order will repeat ",e.jsx("span",{className:"font-bold capitalize",children:a})," until you cancel."]})})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 sticky top-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["Subtotal (",s.reduce((t,r)=>t+r.quantity,0)," items)"]}),e.jsxs("span",{children:["Â£",n.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Delivery"}),e.jsx("span",{className:o===0?"text-green-600 font-semibold":"",children:o===0?"FREE":`Â£${o.toFixed(2)}`})]}),n<30&&e.jsxs("p",{className:"text-xs text-yellow-600 bg-yellow-50 p-2 rounded-lg",children:["Add Â£",(30-n).toFixed(2)," more for FREE delivery!"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-afri-green text-2xl",children:["Â£",b.toFixed(2)]})]}),e.jsx("button",{onClick:()=>{a?localStorage.setItem("repeatPurchaseFrequency",a):localStorage.removeItem("repeatPurchaseFrequency"),l("/checkout")},className:"w-full py-4 bg-gradient-to-r from-afri-green to-afri-green-dark text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all transform hover:scale-105",children:"Proceed to Checkout"}),e.jsx("button",{onClick:()=>l("/products"),className:"w-full py-3 mt-3 border-2 border-afri-green text-afri-green rounded-xl font-semibold hover:bg-afri-green hover:text-white transition-all",children:"Continue Shopping"}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[e.jsx("span",{children:"ğŸ”’"})," Secure Payment"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[e.jsx("span",{children:"ğŸšš"})," Fast Delivery"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:"â†©ï¸"})," Easy Returns"]})]})]})})]})})]})}export{k as default};
