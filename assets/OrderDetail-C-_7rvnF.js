import{j as e}from"./date-iP6_brdS.js";import{i as S,u as A,r as n}from"./vendor-CPDP2aPO.js";import{o as P}from"./index-BU-ROFLt.js";import{g as F}from"./defaultImages-jUbsX-qu.js";import"./ui-Tzc8TJql.js";const i=[{key:"pending",label:"Order Placed",icon:"ðŸ“"},{key:"confirmed",label:"Confirmed",icon:"âœ“"},{key:"preparing",label:"Preparing",icon:"ðŸ‘¨â€ðŸ³"},{key:"out-for-delivery",label:"Out for Delivery",icon:"ðŸšš"},{key:"delivered",label:"Delivered",icon:"ðŸ“¦"}],I={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800","out-for-delivery":"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"};function T(){var o,x,m,h,g,p,u,y,b,j,f,N;const{orderId:l}=S(),a=A(),[s,w]=n.useState(null),[k,c]=n.useState(!0);n.useEffect(()=>{C()},[l]);const C=async()=>{try{c(!0);const t=await P.getById(l);t.success&&w(t.data)}catch(t){console.error("Error fetching order:",t)}finally{c(!1)}},D=()=>{const t=i.findIndex(r=>r.key===(s==null?void 0:s.status));return t>=0?t:0},O=t=>new Date(t).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});if(k)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-afri-green"})});if(!s)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-6xl",children:"ðŸ”"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Order not found"}),e.jsx("button",{onClick:()=>a("/orders"),className:"mt-4 px-6 py-3 bg-afri-green text-white rounded-xl font-semibold",children:"View All Orders"})]})});const d=D();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-afri-green to-afri-green-dark text-white py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsx("button",{onClick:()=>a("/orders"),className:"mb-4 text-white/80 hover:text-white",children:"â† Back to Orders"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Order #",s.orderNumber]}),e.jsx("p",{className:"text-afri-green-light mt-1",children:O(s.createdAt)})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${I[s.status]}`,children:(o=s.status)==null?void 0:o.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase())})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.status!=="cancelled"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-6",children:"Order Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-6 left-0 right-0 h-1 bg-gray-200",children:e.jsx("div",{className:"h-full bg-afri-green transition-all duration-500",style:{width:`${d/(i.length-1)*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:i.map((t,r)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-2xl z-10 transition-all ${r<=d?"bg-afri-green text-white":"bg-gray-200 text-gray-400"}`,children:t.icon}),e.jsx("p",{className:`mt-2 text-sm font-medium text-center ${r<=d?"text-afri-green":"text-gray-400"}`,children:t.label})]},t.key))})]}),s.estimatedDelivery&&e.jsxs("div",{className:"mt-6 pt-6 border-t text-center",children:[e.jsx("p",{className:"text-gray-500",children:"Estimated Delivery"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Date(s.estimatedDelivery).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})})]})]}),s.status==="cancelled"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:"âŒ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-800",children:"Order Cancelled"}),e.jsx("p",{className:"text-red-600",children:s.cancellationReason||"This order has been cancelled."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:["Order Items (",((x=s.items)==null?void 0:x.length)||0,")"]}),e.jsx("div",{className:"space-y-4",children:(m=s.items)==null?void 0:m.map((t,r)=>{var v;return e.jsxs("div",{className:"flex gap-4 pb-4 border-b last:border-0",children:[e.jsx("img",{src:F(t),alt:t.name,className:"w-20 h-20 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",t.quantity]}),t.unit&&e.jsx("p",{className:"text-sm text-gray-500",children:t.unit})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-gray-900",children:["Â£",(t.price*t.quantity).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Â£",(v=t.price)==null?void 0:v.toFixed(2)," each"]})]})]},r)})})]}),s.vendor&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Sold By"}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.vendor.logo&&e.jsx("img",{src:s.vendor.logo,alt:s.vendor.storeName,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.vendor.storeName}),s.vendor.phone&&e.jsxs("p",{className:"text-sm text-gray-500",children:["ðŸ“ž ",s.vendor.phone]})]}),e.jsx("button",{onClick:()=>a(`/store/${s.vendor._id}`),className:"px-4 py-2 border border-afri-green text-afri-green rounded-lg hover:bg-afri-green hover:text-white",children:"Visit Store"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["Â£",((h=s.subtotal)==null?void 0:h.toFixed(2))||(s.totalAmount-(s.deliveryFee||0)).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Delivery Fee"}),e.jsx("span",{className:"font-medium",children:s.deliveryFee===0?e.jsx("span",{className:"text-green-600",children:"Free"}):`Â£${((g=s.deliveryFee)==null?void 0:g.toFixed(2))||"0.00"}`})]}),s.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-Â£",s.discount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between pt-3 border-t text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-afri-green",children:["Â£",(p=s.totalAmount)==null?void 0:p.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),e.jsx("p",{className:"font-medium",children:s.paymentMethod==="card"?"ðŸ’³ Card Payment":s.paymentMethod==="paypal"?"ðŸ…¿ï¸ PayPal":"ðŸ’µ Cash on Delivery"}),e.jsx("p",{className:`text-sm ${s.paymentStatus==="paid"?"text-green-600":"text-yellow-600"}`,children:s.paymentStatus==="paid"?"âœ“ Paid":"â³ Payment Pending"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Delivery Address"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:((u=s.deliveryAddress)==null?void 0:u.name)||s.customerName}),e.jsx("p",{className:"text-gray-600",children:(y=s.deliveryAddress)==null?void 0:y.street}),e.jsxs("p",{className:"text-gray-600",children:[(b=s.deliveryAddress)==null?void 0:b.city,", ",(j=s.deliveryAddress)==null?void 0:j.postcode]}),((f=s.deliveryAddress)==null?void 0:f.phone)&&e.jsxs("p",{className:"text-gray-600 mt-2",children:["ðŸ“ž ",s.deliveryAddress.phone]})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.status==="delivered"&&e.jsx("button",{onClick:()=>{var t,r;return a(`/product/${(r=(t=s.items)==null?void 0:t[0])==null?void 0:r.productId}/reviews`)},className:"w-full py-3 bg-afri-green text-white rounded-xl font-semibold hover:bg-afri-green-dark",children:"â­ Write a Review"}),["pending","confirmed"].includes(s.status)&&e.jsx("button",{className:"w-full py-3 border-2 border-red-500 text-red-500 rounded-xl font-semibold hover:bg-red-50",onClick:()=>{confirm("Are you sure you want to cancel this order?")&&alert("Cancellation request submitted")},children:"Cancel Order"}),e.jsx("button",{onClick:()=>a("/products"),className:"w-full py-3 border-2 border-afri-green text-afri-green rounded-xl font-semibold hover:bg-afri-green hover:text-white",children:"Order Again"}),s.status==="out-for-delivery"&&e.jsx("button",{onClick:()=>a(`/track-order/${l}`),className:"w-full py-3 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700",children:"ðŸ—ºï¸ Track Delivery Live"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Order Timeline"}),e.jsx("div",{className:"space-y-4",children:((N=s.timeline)==null?void 0:N.map((t,r)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-afri-green"}),r<s.timeline.length-1&&e.jsx("div",{className:"w-0.5 h-12 bg-gray-200"})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500",children:t.description}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(t.timestamp).toLocaleString("en-GB")})]})]},r)))||e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No timeline events available"})})]}),e.jsxs("div",{className:"bg-afri-green/10 rounded-xl p-6 mt-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"If you have any questions about your order, we're here to help."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"px-4 py-2 bg-white rounded-lg text-gray-700 hover:bg-gray-100",children:"ðŸ“§ Contact Support"}),e.jsx("button",{className:"px-4 py-2 bg-white rounded-lg text-gray-700 hover:bg-gray-100",children:"ðŸ“ž Call Us"})]})]})]})]})}export{T as default};
