import{j as e}from"./date-iP6_brdS.js";import{r as n}from"./vendor-CPDP2aPO.js";import{u as w,a as p}from"./index-BU-ROFLt.js";import"./ui-Tzc8TJql.js";function A(){const{user:a,updateUser:f}=w(),[d,h]=n.useState("profile"),[c,o]=n.useState(!1),[m,l]=n.useState({type:"",text:""}),[i,u]=n.useState({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||""}),[g,y]=n.useState([]),[r,x]=n.useState({current:"",new:"",confirm:""});n.useEffect(()=>{b()},[]);const b=async()=>{try{const s=await p.getProfile();s.success&&(u({name:s.data.name||"",email:s.data.email||"",phone:s.data.phone||""}),y(s.data.addresses||[]))}catch(s){console.error("Error fetching profile:",s)}},j=async s=>{s.preventDefault(),o(!0);try{const t=await p.updateProfile(i);t.success&&(l({type:"success",text:"Profile updated successfully!"}),f&&f(t.data))}catch(t){l({type:"error",text:t.message||"Failed to update profile"})}finally{o(!1),setTimeout(()=>l({type:"",text:""}),3e3)}},v=async s=>{if(s.preventDefault(),r.new!==r.confirm){l({type:"error",text:"Passwords do not match"});return}o(!0);try{await p.changePassword({currentPassword:r.current,newPassword:r.new}),l({type:"success",text:"Password changed successfully!"}),x({current:"",new:"",confirm:""})}catch(t){l({type:"error",text:t.message||"Failed to change password"})}finally{o(!1),setTimeout(()=>l({type:"",text:""}),3e3)}},N=[{id:"profile",label:"Profile",icon:"ðŸ‘¤"},{id:"addresses",label:"Addresses",icon:"ðŸ“"},{id:"security",label:"Security",icon:"ðŸ”’"},{id:"preferences",label:"Preferences",icon:"âš™ï¸"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-afri-green to-afri-green-dark text-white py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Profile"}),e.jsx("p",{className:"text-afri-green-light mt-1",children:"Manage your account settings"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[m.text&&e.jsx("div",{className:`mb-6 p-4 rounded-lg ${m.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.text}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:N.map(s=>e.jsxs("button",{onClick:()=>h(s.id),className:`flex items-center gap-2 px-6 py-4 font-medium whitespace-nowrap transition-colors ${d===s.id?"text-afri-green border-b-2 border-afri-green bg-gray-50":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("span",{children:s.icon}),s.label]},s.id))}),e.jsxs("div",{className:"p-6",children:[d==="profile"&&e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:i.name,onChange:s=>u({...i,name:s.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-afri-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:i.email,disabled:!0,className:"w-full px-4 py-3 border rounded-lg bg-gray-50 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:i.phone,onChange:s=>u({...i,phone:s.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-afri-green"})]}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-afri-green text-white rounded-lg font-semibold hover:bg-afri-green-dark disabled:opacity-50",children:c?"Saving...":"Save Changes"})]}),d==="addresses"&&e.jsxs("div",{className:"space-y-4",children:[g.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved addresses"}):g.map((s,t)=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.label||"Address"}),e.jsx("p",{className:"text-gray-600",children:s.street}),e.jsxs("p",{className:"text-gray-600",children:[s.city,", ",s.postcode]})]}),s.isDefault&&e.jsx("span",{className:"text-xs bg-afri-green text-white px-2 py-1 rounded h-fit",children:"Default"})]})},t)),e.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-afri-green hover:text-afri-green",children:"+ Add New Address"})]}),d==="security"&&e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:r.current,onChange:s=>x({...r,current:s.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-afri-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:r.new,onChange:s=>x({...r,new:s.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-afri-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:r.confirm,onChange:s=>x({...r,confirm:s.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-afri-green"})]}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-afri-green text-white rounded-lg font-semibold hover:bg-afri-green-dark disabled:opacity-50",children:c?"Updating...":"Change Password"})]}),d==="preferences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive order updates via email"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5 text-afri-green rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive delivery updates via SMS"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5 text-afri-green rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Promotional Emails"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive deals and offers"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-afri-green rounded"})]})]})]})]})]})]})}export{A as default};
